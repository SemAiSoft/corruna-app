"use strict";(self.webpackChunkcorunna_ui=self.webpackChunkcorunna_ui||[]).push([[1822],{1822:(P,_,s)=>{s.r(_),s.d(_,{RegisterHomePageModule:()=>ct});var m=s(9595),d=s(4850),t=s(4650),u=s(6895),a=s(8118),x=s(5861),i=s(4006),g=s(2958),c=s(9063),v=s(1038),w=s(9808),Z=s(6177),T=s(5115);let D=(()=>{class r extends d.q2{constructor(){super(c.ih.Setting,"rmd",!0)}saveExpenditure(e){return this.post({payload:e,endPoint:[c.yv.settingsStore,c.yv.expenditure]})}getExpenses(e,o){return this.get({endPoint:[c.wm.settingsQuery,c.yv.expenditure],params:[{k:"sDate",v:JSON.stringify(e)},{k:"eDate",v:JSON.stringify(o)}]})}deleteExpenditure(e){return this.delete({endPoint:[c.yv.settingsStore,c.yv.expenditure],payload:e})}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var C=s(2412),A=s(6726),b=s(2216),h=s(9492);function S(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"fa-icon",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.deleteExpense(n))}),t.qZA()}}function k(r,p){if(1&r&&(t.TgZ(0,"ion-col",12)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-subtitle",13)(4,"label"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"ion-label",14),t.YNc(8,S,1,0,"fa-icon",15),t.qZA()(),t.TgZ(9,"ion-card-title",16),t._uU(10),t.ALo(11,"number"),t.qZA()(),t.TgZ(12,"ion-card-content")(13,"p",17)(14,"label",18),t._uU(15,"Remark:"),t.qZA(),t._UZ(16,"br"),t._uU(17),t.qZA(),t.TgZ(18,"ion-title",19),t._uU(19),t.qZA()()()()),2&r){const e=p.$implicit,o=t.oxw();t.xp6(5),t.hij(" ",t.xi3(6,6,null==e?null:e.createdAt,"d/M/yy h:mm a")," "),t.xp6(3),t.Q6J("ngIf","Super"==o.staff.acctType),t.xp6(2),t.Oqu(t.lcZ(11,9,e.expenseAmount)),t.xp6(7),t.hij(" ",null==e?null:e.expenseRemark," "),t.xp6(2),t.AsE("by: ",null==e||null==e.userAccount?null:e.userAccount.firstName," ",null==e||null==e.userAccount?null:e.userAccount.surName,"")}}const J=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-blue",adaptivePosition:!0}};function F(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"ion-header",21)(1,"ion-toolbar",22)(2,"h3",23),t._uU(3," Create "),t.qZA()()(),t.TgZ(4,"ion-content",24)(5,"form",25)(6,"section",26)(7,"div")(8,"label"),t._uU(9,"Spent On:"),t.qZA(),t._UZ(10,"input",27),t.qZA(),t.TgZ(11,"div")(12,"label"),t._uU(13,"Amount Spent:"),t.qZA(),t._UZ(14,"input",28),t.qZA(),t.TgZ(15,"div")(16,"label"),t._uU(17,"Expense Remark:"),t.qZA(),t._UZ(18,"input",29),t.qZA(),t.TgZ(19,"div",30)(20,"ion-button",31),t.NdJ("handle",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.saveResult(n))}),t._uU(21," Save "),t.qZA(),t.TgZ(22,"ion-button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.expenditureForm.reset())}),t._uU(23," Reset "),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(5),t.Q6J("formGroup",e.expenditureForm),t.xp6(5),t.Q6J("bsConfig",t.DdM(3,J)),t.xp6(10),t.Q6J("handler",e.handler)}}const Y=function(){return[0,.5,.6]};let R=(()=>{class r{constructor(e,o,n,l,f,y){this.platform=e,this.systemConfigService=o,this.dialogService=n,this.localStorageService=l,this.expenditureService=f,this.router=y,this.expenditures=[],this.sDate=(0,v.Z)(new Date,3),this.eDate=new Date,this.shopBranch=null,this.handler=M=>this.expenditureForm.invalid?(g.F.show({text:c.xR.invalidForm,duration:"long",position:"bottom"}),Promise.resolve()):this.expenditureService.saveExpenditure(this.expenditureForm.value),this.expenditureForm=new i.cw({expenseAmount:new i.NI(null,i.kI.required),expenseDate:new i.NI(new Date,i.kI.required),expenseRemark:new i.NI(null,i.kI.required)})}ngOnInit(){this.staff=JSON.parse(this.localStorageService.get("staff-profile")||"{}"),this.getExpenditures()}ngOnDestroy(){this.modal?.dismiss()}closeModal(){this.router.navigate(["Super"==this.staff.acctType?"/super/dashboard-home":this.staff.acctType?.toLowerCase()]),this.modal?.dismiss()}getExpenditures(e){this.expenditureService.getExpenses(this.sDate,this.eDate).subscribe(o=>{e&&e.target.complete(),Array.isArray(o)&&(this.expenditures=o)})}deleteExpense(e){var o=this;return(0,x.Z)(function*(){"Super"===o.staff.acctType&&(yield(0,w.n)(o.dialogService.openConfirmDialog({title:"Action Confirmation",message:"Are you sure to delete this expenditure record?"})))&&o.expenditureService.deleteExpenditure(e._id).subscribe(l=>{l?.modifiedCount>=1&&(o.getExpenditures(),g.F.show({text:"Expenditure record "+c.kt.itemDeleted,duration:"long"}))})})()}saveResult(e){var o=this;return(0,x.Z)(function*(){e?._id&&(yield g.F.show({text:"Expenditure saved successfully",duration:"long",position:"top"}),o.expenditureForm.reset(),o.getExpenditures())})()}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(C.t4),t.Y36(Z.c),t.Y36(T.xA),t.Y36(d.n2),t.Y36(D),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["healmah-expenditure"]],viewQuery:function(o,n){if(1&o&&t.Gf(a.ki,7),2&o){let l;t.iGM(l=t.CRH())&&(n.modal=l.first)}},hostBindings:function(o,n){1&o&&t.NdJ("popstate",function(f){return n.closeModal(f)},!1,t.Jf7)},decls:14,vars:11,consts:[[1,"d:flex","gap:10"],["type","text","bsDatepicker","","container","body",1,"form-control","flex:1","shadow:none!",3,"bsConfig","ngModel","ngModelChange"],[1,"btn","btn-outline-primary",3,"click"],["icon","search"],[3,"fixed"],[1,"p:0!"],["size","12","class","p:0!",4,"ngFor","ngForOf"],["trigger","open-expense-modal","sheetModal","","handleBehavior","cycle",3,"initialBreakpoint","breakpoints"],["modal",""],["vertical","top","horizontal","start","slot","fixed"],["color","primary","id","open-expense-modal"],["name","add-outline"],["size","12",1,"p:0!"],[1,"flex","jc:space-between"],[1,"d:flex","gap:20"],["icon","trash-alt","class","text-danger",3,"click",4,"ngIf"],["color","primary",1,"f:2rem!","text-align:center!"],[1,"f:f:1.2rem!"],[1,"text-primary"],[1,"text-align:center!","f:0.8rem!"],["icon","trash-alt",1,"text-danger",3,"click"],[1,"ion-no-border"],["color","tertiary"],[1,"flex","jc:center","px:20","f:black!"],[1,"ion-padding"],[3,"formGroup"],[1,"flex","flex:column","gap:15"],["type","text","bsDatepicker","","container","body","formControlName","expenseDate",1,"form-control","shadow:none!",3,"bsConfig"],["type","number","min","1","formControlName","expenseAmount",1,"form-control"],["type","text","placeholder","e.g use for ...","formControlName","expenseRemark",1,"form-control"],[1,"flex","gap:20","mt:20","{flex:1}>.btn"],["btnDisabler","","expand","block","fill","solid","shape","round",1,"w-100",3,"handler","handle"],["expand","block","color","warning","fill","solid","shape","round",1,"w-100",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"header",0)(1,"input",1),t.NdJ("ngModelChange",function(f){return n.sDate=f}),t.qZA(),t.TgZ(2,"input",1),t.NdJ("ngModelChange",function(f){return n.eDate=f}),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.getExpenditures()}),t._UZ(4,"fa-icon",3),t.qZA()(),t.TgZ(5,"ion-grid",4)(6,"ion-row",5),t.YNc(7,k,20,11,"ion-col",6),t.qZA()(),t.TgZ(8,"ion-modal",7,8),t.YNc(10,F,24,4,"ng-template"),t.qZA(),t.TgZ(11,"ion-fab",9)(12,"ion-fab-button",10),t._UZ(13,"ion-icon",11),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("bsConfig",t.DdM(8,J))("ngModel",n.sDate),t.xp6(1),t.Q6J("bsConfig",t.DdM(9,J))("ngModel",n.eDate),t.xp6(3),t.Q6J("fixed",!0),t.xp6(2),t.Q6J("ngForOf",n.expenditures),t.xp6(1),t.Q6J("initialBreakpoint",.5)("breakpoints",t.DdM(10,Y)))},dependencies:[u.sg,u.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.qQ,i.On,i.sg,i.u,A.h,a.YG,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.wI,a.W2,a.IJ,a.W4,a.jY,a.Gu,a.gu,a.Q$,a.Nd,a.wd,a.sr,a.ki,b.BN,h.Np,h.Y5,u.JJ,u.uU],styles:["[_nghost-%COMP%]{--ion-color-primary: #1F5BBC;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return r})(),U=(()=>{class r extends d.q2{constructor(){super(c.ih.Setting,"rmd",!0)}savePay(e){return this.post({payload:e,endPoint:[c.yv.settingsStore,c.yv.staffPay]})}getStaffPay(e,o){return this.get({endPoint:[c.wm.settingsQuery,c.wm.staffPay],params:[{k:"sDate",v:JSON.stringify(e)},{k:"eDate",v:JSON.stringify(o)}]})}deleteStaffPay(e){return this.delete({payload:e,endPoint:[c.yv.settingsStore,c.yv.staffPay]})}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var I=s(8115),Q=s(895),B=s(5119),N=s(900),q=s(8033),H=s(5857),L=s(4201),j=s(161),G=s(5939),K=s(2879);function W(r,p){if(1&r&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&r){const e=p.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.Oqu(null==e?null:e.userName)}}function $(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"ion-toolbar",20)(1,"ion-title"),t._uU(2),t.qZA(),t.TgZ(3,"ion-icon",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(21);return t.KtG(null==n?null:n.dismiss())}),t.qZA()(),t.TgZ(4,"prime-table",22),t._uU(5," > "),t.qZA()}if(2&r){const e=t.oxw();t.xp6(2),t.hij("",null==e.selectedStaff?null:e.selectedStaff.staffName," - PAYOUTS"),t.xp6(2),t.Q6J("columns",e.staffPayColumn)("data",null==e.selectedStaff?null:e.selectedStaff.staffPays)("rowsPerPage",5)("rowContextMenu",e.payDetailContextMenu)("rowContextMenuEventType",e.platform.is("mobile")?"press":"contextmenu")}}const O=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-blue",adaptivePosition:!0}};let z=(()=>{class r{constructor(e,o,n,l,f,y,M){this.systemConfigService=e,this.userAccountService=o,this.staffPayService=n,this.menuService=l,this.platform=f,this.localStorageService=y,this.router=M,this.sDate=(0,v.Z)(new Date,3),this.eDate=new Date,this.staffAccounts=[],this.payOuts=[],this.columns=[{header:"STAFF",field:"staffName"},{header:"COMM",field:"serviceCom"},{header:"PAY OUT",field:"payAmount"},{header:"BALANCE",field:"balance"}],this.staffPayColumn=[{header:"AMT",field:"payAmount"},{header:"DATE",field:"createdAt"},{header:"RMK",field:"payRemark"},{header:"BY",field:"userAccount"}],this.totPayout=0,this.rowContextMenu=[{iconLeft:"book-open",name:"Details",clickAction:()=>{this.staffDetail()}}],this.payDetailContextMenu=[{iconLeft:"trash",iconLeftStyle:"f:red",name:"Delete",clickAction:()=>{if("Super"!==this.staff.acctType)return;const ft=this.menuService.contextRow.rowData;this.menuService.closeAllMenu(),this.staffPayService.deleteStaffPay(ft._id).subscribe(dt=>{dt?.modifiedCount&&(this.modal?.dismiss(),this.getStaffPay(),g.F.show({text:"Pay out deleted successfully"}))})}}],this.detailOpen=!1,this.savePay=()=>this.staffPayForm.invalid?(g.F.show({text:c.xR.invalidForm,duration:"long",position:"bottom"}),Promise.resolve()):this.staffPayService.savePay(this.staffPayForm.value),this.staffPayForm=new i.cw({payAmount:new i.NI(null,i.kI.required),staff:new i.NI(null,i.kI.required),payRemark:new i.NI(null)})}ngOnInit(){this.staff=JSON.parse(this.localStorageService.get("staff-profile")||"{}"),this.systemConfigService.getSystemConfig().subscribe(e=>{this.settings=e,"Daily"==this.settings.commissionRange&&(this.sDate=(0,I.Z)(new Date)),"Weekly"==this.settings.commissionRange&&(this.sDate=(0,Q.Z)(new Date)),"Monthly"==this.settings.commissionRange&&(this.sDate=(0,B.Z)(new Date)),this.getStaffPay()}),this.getStaffPay(),this.userAccountService.getAccounts().subscribe(e=>{e?.length&&e.forEach(o=>{this.staffAccounts.push({_id:o._id,userName:o.firstName+" "+o.surName,acctType:o.acctType})})})}getStaffPay(){return this.staffPayService.getStaffPay(this.sDate,this.eDate).subscribe(e=>{this.payOuts=e??[],this.totPayout=(0,c.bY)(this.payOuts?.reduce((o,n)=>o+n?.payAmount,0)||0)})}get requireRemark(){const e=this.staffPayForm.get("staff")?.value;return"Super"==this.staffAccounts.find(n=>n?._id==e)?.acctType}staffDetail(){this.selectedStaff=this.menuService.contextRow?.rowData,this.selectedStaff.staffPays=this.selectedStaff?.staffPays?.map(e=>({_id:e?._id,payAmount:e?.payAmount,payRemark:e?.payRemark,acctType:(0,N.Z)(new Date(e.createdAt))?e.staff[0]?.acctType:e.acctType,userAccount:Array.isArray(e.userAccount)?e.userAccount[0]?.firstName:e?.userAccount,createdAt:(0,N.Z)(new Date(e.createdAt))?(0,q.Z)(new Date(e.createdAt),"d/M/yy - h:ma"):e?.createdAt})),this.staffPayColumn="Super"!==this.selectedStaff?.staffPays[0]?.acctType?[{header:"AMT",field:"payAmount"},{header:"DATE",field:"createdAt"},{header:"BY",field:"userAccount"}]:[{header:"AMT",field:"payAmount"},{header:"DATE",field:"createdAt"},{header:"RMK",field:"payRemark"},{header:"BY",field:"userAccount"}],this.modal.present().then(()=>{this.detailOpen=!0,history.pushState({detail:!0,desc:"fake state for our modal"},null)}),this.modal.onDidDismiss().then(()=>{this.detailOpen=!1})}apiResult(e){var o=this;return(0,x.Z)(function*(){e?._id&&(yield g.F.show({text:"Pay recorded successfully",duration:"long",position:"top"}),o.staffPayForm.reset(),o.getStaffPay())})()}closeModal(){this.modal.isOpen?this.modal?.dismiss():this.router.navigate(["Super"==this.staff.acctType?"/super/dashboard-home":this.staff.acctType?.toLowerCase()])}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(Z.c),t.Y36(H.N),t.Y36(U),t.Y36(L.hl),t.Y36(C.t4),t.Y36(d.n2),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-staff-pay"]],viewQuery:function(o,n){if(1&o&&t.Gf(a.ki,5),2&o){let l;t.iGM(l=t.CRH())&&(n.modal=l.first)}},hostBindings:function(o,n){1&o&&t.NdJ("popstate",function(f){return n.closeModal(f)},!1,t.Jf7)},decls:23,vars:16,consts:[[3,"formGroup"],[1,"flex","my-1","gap:5"],["formControlName","payAmount","placeholder","pay amt","type","number","min","1",1,"form-control","flex-basis:150px"],["formControlName","staff",1,"form-control","flex:1"],[3,"value",4,"ngFor","ngForOf"],["formControlName","payRemark","controlConfig","","placeholder","remark","type","text",1,"form-control","flex:1",3,"require"],["btnDisabler","",1,"btn","btn-outline-primary","flex-basis:100px",3,"handler","handle"],["icon","save"],[3,"data","columns","isCustomCaption","rowContextMenu","rowContextMenuEventType"],["table",""],["caption","",1,"flex","{flex:1}>*"],[1,"flex","ai:center","gap:5","bg:white","flex:1","pl:0","r:5"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],["icon","search"],["type","search",1,"form-control","shadow:none!","ps-3","b:none!",3,"placeholder","input"],[1,"d:flex","gap:0"],["type","text","bsDatepicker","","container","body",1,"form-control","flex:1","shadow:none!",3,"bsConfig","ngModel","ngModelChange"],["id","detail-modal","scrollbar","",1,"$min-width:90vw!"],["modal",""],[3,"value"],[1,"pr:15"],["slot","start","name","close-outline","slot","end",3,"click"],[3,"columns","data","rowsPerPage","rowContextMenu","rowContextMenuEventType"]],template:function(o,n){if(1&o){const l=t.EpF();t.TgZ(0,"form",0)(1,"header",1),t._UZ(2,"input",2),t.TgZ(3,"select",3),t._UZ(4,"option"),t.YNc(5,W,2,2,"option",4),t.qZA()(),t.TgZ(6,"footer",1),t._UZ(7,"input",5),t.TgZ(8,"button",6),t.NdJ("handle",function(y){return n.apiResult(y)}),t._UZ(9,"fa-icon",7),t.qZA()()(),t.TgZ(10,"prime-table",8,9)(12,"caption",10)(13,"span",11)(14,"button",12),t.NdJ("click",function(){return n.getStaffPay()}),t._UZ(15,"fa-icon",13),t.qZA(),t.TgZ(16,"input",14),t.NdJ("input",function(y){t.CHM(l);const M=t.MAs(11);return t.KtG(M.searchTable(y))}),t.qZA()(),t.TgZ(17,"header",15)(18,"input",16),t.NdJ("ngModelChange",function(y){return n.sDate=y}),t.qZA(),t.TgZ(19,"input",16),t.NdJ("ngModelChange",function(y){return n.eDate=y}),t.qZA()()()(),t.TgZ(20,"ion-modal",17,18),t.YNc(22,$,6,6,"ng-template"),t.qZA()}2&o&&(t.Q6J("formGroup",n.staffPayForm),t.xp6(5),t.Q6J("ngForOf",n.staffAccounts),t.xp6(2),t.Q6J("require",n.requireRemark),t.xp6(1),t.Q6J("handler",n.savePay),t.xp6(2),t.Q6J("data",n.payOuts)("columns",n.columns)("isCustomCaption",!0)("rowContextMenu",n.rowContextMenu)("rowContextMenuEventType",n.platform.is("mobile")?"press":"contextmenu"),t.xp6(6),t.Q6J("placeholder","(N"+n.totPayout+")"),t.xp6(2),t.Q6J("bsConfig",t.DdM(14,O))("ngModel",n.sDate),t.xp6(1),t.Q6J("bsConfig",t.DdM(15,O))("ngModel",n.eDate))},dependencies:[u.sg,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.qQ,i.On,i.sg,i.u,A.h,j.A,G.V,a.gu,a.wd,a.sr,a.ki,b.BN,h.Np,h.Y5,K.I],styles:["[_nghost-%COMP%]{--ion-color-primary: #1F5BBC;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return r})(),V=(()=>{class r extends d.q2{constructor(){super(c.ih.Setting,"rmd",!0)}saveTodo(e){return this.post({payload:e,endPoint:[c.yv.settingsStore,c.yv.todo]})}markTodoDone(e){return this.put({payload:e,endPoint:[c.yv.settingsStore,c.yv.todo]})}deleteTodo(e){return this.delete({payload:e,endPoint:[c.yv.settingsStore,c.yv.todo]})}getTodos(e,o){return this.get({endPoint:[c.wm.settingsQuery,c.yv.todo],params:[{k:"sDate",v:JSON.stringify(e)},{k:"eDate",v:JSON.stringify(o)}]})}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function X(r,p){1&r&&t._UZ(0,"fa-icon",21)}function tt(r,p){if(1&r&&(t.TgZ(0,"label",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",null==e||null==e.todoDoneBy?null:e.todoDoneBy.firstName,"@",t.xi3(2,2,null==e?null:e.todoDoneAt,"d/M/yy-h:mma")," ")}}const et=function(r){return{done:r}};function ot(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"li",12)(1,"section",13)(2,"span",14),t.NdJ("click",function(){const l=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.markTodoDone(l))}),t.YNc(3,X,1,0,"fa-icon",15),t.qZA(),t.TgZ(4,"p",16),t._uU(5),t.qZA()(),t.TgZ(6,"button",17),t.NdJ("click",function(){const l=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.deleteTodo(l))}),t._UZ(7,"fa-icon",18),t.qZA(),t.TgZ(8,"label",19),t._uU(9),t.ALo(10,"date"),t.qZA(),t.YNc(11,tt,3,5,"label",20),t.qZA()}if(2&r){const e=p.$implicit;t.Q6J("ngClass",t.VKq(9,et,null==e?null:e.todoDone)),t.xp6(3),t.Q6J("ngIf",null==e?null:e.todoDone),t.xp6(2),t.hij(" ",null==e?null:e.todoNote," "),t.xp6(4),t.AsE(" ",null==e||null==e.userAccount?null:e.userAccount.firstName,"@",t.xi3(10,6,null==e?null:e.createdAt,"d/M/yy-h:mma")," "),t.xp6(2),t.Q6J("ngIf",null==e?null:e.todoDone)}}const E=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-blue",adaptivePosition:!0}};let nt=(()=>{class r{constructor(e,o,n,l){this.todoService=e,this.dialogService=o,this.alertController=n,this.localStorageService=l,this.sDate=(0,v.Z)(new Date,7),this.eDate=new Date,this.todos=[],this.doneTodoRate=0,this.saveTodo=()=>this.todoForm.invalid?(g.F.show({text:c.xR.invalidForm,duration:"long",position:"bottom"}),Promise.resolve()):this.todoService.saveTodo(this.todoForm.value),this.todoForm=new i.cw({todoNote:new i.NI(null,i.kI.required)})}ngOnInit(){this.staff=JSON.parse(this.localStorageService.get("staff-profile")||"{}"),this.getTodos()}markTodoDone(e){var o=this;return(0,x.Z)(function*(){e.todoDone||o.alertController.create({header:"Action Confirmation",message:"Mark this as done?",buttons:[{text:"Yes",role:"confirm",handler:()=>{o.todoService.markTodoDone(e).subscribe(n=>{n?._id&&o.getTodos()})}},{text:"No",role:"cancel"}]}).then(n=>n.present())})()}deleteTodo(e){"Super"===this.staff.acctType&&this.alertController.create({header:"Action Confirmation",message:"Are you sure to delete todo?",buttons:[{text:"Yes",role:"confirm",handler:()=>{this.todoService.deleteTodo(e?._id).subscribe(o=>{o?.modifiedCount&&this.getTodos()})}},{text:"No",role:"cancel"}]}).then(o=>o.present())}saveResult(e){var o=this;return(0,x.Z)(function*(){e?._id&&(yield g.F.show({text:"Todo saved successfully",duration:"long",position:"top"}),o.todoForm.reset(),o.getTodos())})()}getTodos(){this.todoService.getTodos(this.sDate,this.eDate).subscribe(e=>{this.todos=e;const o=e?.filter(n=>n.todoDone);this.doneTodoRate=(o?.length??1)/(e?.length??1)})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(V),t.Y36(T.xA),t.Y36(C.Br),t.Y36(d.n2))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-todo"]],decls:13,vars:10,consts:[[1,"d:flex","gap:10"],["type","text","bsDatepicker","","container","body",1,"form-control","flex:1","shadow:none!",3,"bsConfig","ngModel","ngModelChange"],[1,"btn","btn-outline-primary",3,"click"],["icon","search"],[1,"w:100%","bg:transparent!","r:15","my:10","bg:white;r:15px;shadow:0|2px|4px|rgba(0,0,0,0.1);p:10"],["mode","ios","color","primary",3,"value"],[1,"flex","ai:center","gap:10",3,"formGroup"],["type","text","formControlName","todoNote","placeholder","type here...",1,"form-control","shadow-none","b:#AEC9F2!","h:50px","p:10","pl:20!","r:20!"],["btnDisabler","",1,"btn","btn-primary","r:20!","h:50px","w:50px","b:2px|solid|#EBECEE!",3,"handler","handle"],["icon","save",1,"f:white"],[1,"m:0!","p:0!","f:white!","{width:calc(100%-40px);bg:#1F5BBC;my:15;p:10;min-h:45px;cursor:pointer!;r:20;}>li","{bg:#607d8b}>li.done"],["class","\n    shadow rel\n    ",3,"ngClass",4,"ngFor","ngForOf"],[1,"shadow","rel",3,"ngClass"],[1,"d:flex","ai:center","gap:10","rel","bb:1px|solid|rgba(0,0,0,0.2)","p:0|5|0|0"],[1,"bg:#2f363e","w:30px!","h:30px!","r:50%","p:10","flex","ai:center","jc:center","flex-basis:30px!",3,"click"],["icon","check",4,"ngIf"],[1,"f:'TimesNewRoman',Times,serif"],[1,"top:50%","translateY(-50%)","text-white","d:flex!","ai:center!","jc:center!","btn","btn-danger","abs","h:35","w:35","r:50%!","right:-40px",3,"click"],["icon","times"],[1,"text-align:left","d:block","f:0.8rem","f:white/.7"],["class","text-align:right d:block f:0.8rem f:white/.7 text-decoration-line-through",4,"ngIf"],["icon","check"],[1,"text-align:right","d:block","f:0.8rem","f:white/.7","text-decoration-line-through"]],template:function(o,n){1&o&&(t.TgZ(0,"header",0)(1,"input",1),t.NdJ("ngModelChange",function(f){return n.sDate=f}),t.qZA(),t.TgZ(2,"input",1),t.NdJ("ngModelChange",function(f){return n.eDate=f}),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.getTodos()}),t._UZ(4,"fa-icon",3),t.qZA()(),t.TgZ(5,"section",4),t._UZ(6,"ion-progress-bar",5),t.qZA(),t.TgZ(7,"form",6),t._UZ(8,"input",7),t.TgZ(9,"button",8),t.NdJ("handle",function(f){return n.saveResult(f)}),t._UZ(10,"fa-icon",9),t.qZA()(),t.TgZ(11,"ul",10),t.YNc(12,ot,12,11,"li",11),t.qZA()),2&o&&(t.xp6(1),t.Q6J("bsConfig",t.DdM(8,E))("ngModel",n.sDate),t.xp6(1),t.Q6J("bsConfig",t.DdM(9,E))("ngModel",n.eDate),t.xp6(4),t.Q6J("value",n.doneTodoRate),t.xp6(1),t.Q6J("formGroup",n.todoForm),t.xp6(2),t.Q6J("handler",n.saveTodo),t.xp6(3),t.Q6J("ngForOf",n.todos))},dependencies:[u.mk,u.sg,u.O5,i._Y,i.Fj,i.JJ,i.JL,i.On,i.sg,i.u,A.h,a.X7,b.BN,h.Np,h.Y5,u.uU],styles:["[_nghost-%COMP%]{--ion-color-primary: #1F5BBC;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return r})();function rt(r,p){1&r&&t._UZ(0,"app-todo")}function it(r,p){1&r&&t._UZ(0,"healmah-expenditure")}function at(r,p){1&r&&t._UZ(0,"app-staff-pay")}const st=[{path:"",component:(()=>{class r{constructor(e){this.localStorageService=e,this.segment=2}ngOnInit(){this.staff=JSON.parse(this.localStorageService.get("staff-profile")||"{}")}segmentChanged(e){this.segment=e?.detail?.value,this.Swiper.slideTo(this.segment)}slideChanged(e){this.segment=e.detail[0]?.activeIndex,this.Swiper=e.detail[0]}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(d.n2))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["healmah-register-home"]],decls:26,vars:10,consts:[["color","primary",1,"ion-no-border"],["slot","start"],["color","light",3,"defaultHref"],["slot","end","color","light"],[3,"value","ionChange"],[3,"value"],["color","tertiary"],[1,"min-h:100%!","w:100%","bg:transparent!","r:15","my:10","{bg:white;r:15px;shadow:0|2px|4px|rgba(0,0,0,0.1);p:10}>swiper-slide",3,"loop","slidesPerView","slidechange","init"],["swiper",""],[4,"ngIf"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Salon Register"),t.qZA()(),t.TgZ(6,"ion-toolbar",0)(7,"ion-segment",4),t.NdJ("ionChange",function(f){return n.segmentChanged(f)}),t.TgZ(8,"ion-segment-button",5)(9,"ion-label"),t._uU(10,"Todo Memo"),t.qZA()(),t.TgZ(11,"ion-segment-button",5)(12,"ion-label"),t._uU(13,"Expenditure"),t.qZA()(),t.TgZ(14,"ion-segment-button",5)(15,"ion-label"),t._uU(16,"Pay Outs"),t.qZA()()()()(),t.TgZ(17,"ion-content",6)(18,"swiper-container",7,8),t.NdJ("slidechange",function(f){return n.slideChanged(f)})("init",function(f){return n.slideChanged(f)}),t.TgZ(20,"swiper-slide"),t.YNc(21,rt,1,0,"app-todo",9),t.qZA(),t.TgZ(22,"swiper-slide"),t.YNc(23,it,1,0,"healmah-expenditure",9),t.qZA(),t.TgZ(24,"swiper-slide"),t.YNc(25,at,1,0,"app-staff-pay",9),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("defaultHref",null==n.staff||null==n.staff.acctType?null:n.staff.acctType.toLowerCase()),t.xp6(4),t.Q6J("value",n.segment),t.xp6(1),t.Q6J("value",0),t.xp6(3),t.Q6J("value",1),t.xp6(3),t.Q6J("value",2),t.xp6(4),t.Q6J("loop",!1)("slidesPerView",1),t.xp6(3),t.Q6J("ngIf",0==n.segment),t.xp6(2),t.Q6J("ngIf",1==n.segment),t.xp6(2),t.Q6J("ngIf",2==n.segment))},dependencies:[u.O5,a.Sm,a.W2,a.Gu,a.Q$,a.cJ,a.GO,a.wd,a.sr,a.QI,a.oU,R,z,nt],styles:["[_nghost-%COMP%]{--ion-color-primary: #1F5BBC;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return r})()}];let lt=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(st),m.Bz]})}return r})(),ct=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[d._o,d.Nu,T.gw,lt]})}return r})()},6177:(P,_,s)=>{s.d(_,{c:()=>u});var m=s(4850),d=s(9063),t=s(4650);let u=(()=>{class a extends m.q2{constructor(){super(d.ih.Setting,"rmd",!0),this.getSystemConfig().subscribe(i=>{this.systemConfig=i})}getDeleted(i,g,c){return this.get({endPoint:[d.wm.settingsQuery],params:[{k:"type",v:i},{k:"sDate",v:JSON.stringify(g)},{k:"eDate",v:JSON.stringify(c)}]})}saveSystemConfig(i){return this.post({payload:i,endPoint:[d.yv.settingsStore,d.yv.saveSettings]})}getSystemConfig(){return this.get({endPoint:[d.wm.settingsQuery,d.wm.getSettings]})}static#t=this.\u0275fac=function(g){return new(g||a)};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},8115:(P,_,s)=>{s.d(_,{Z:()=>t});var m=s(953),d=s(833);function t(u){(0,d.Z)(1,arguments);var a=(0,m.Z)(u);return a.setHours(0,0,0,0),a}},5119:(P,_,s)=>{s.d(_,{Z:()=>t});var m=s(953),d=s(833);function t(u){(0,d.Z)(1,arguments);var a=(0,m.Z)(u);return a.setDate(1),a.setHours(0,0,0,0),a}},895:(P,_,s)=>{s.d(_,{Z:()=>a});var m=s(953),d=s(1998),t=s(833),u=s(8370);function a(x,i){var g,c,v,w,Z,T,D,C;(0,t.Z)(1,arguments);var A=(0,u.j)(),b=(0,d.Z)(null!==(g=null!==(c=null!==(v=null!==(w=i?.weekStartsOn)&&void 0!==w?w:null==i||null===(Z=i.locale)||void 0===Z||null===(T=Z.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==v?v:A.weekStartsOn)&&void 0!==c?c:null===(D=A.locale)||void 0===D||null===(C=D.options)||void 0===C?void 0:C.weekStartsOn)&&void 0!==g?g:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=(0,m.Z)(x),S=h.getDay(),k=(S<b?7:0)+S-b;return h.setDate(h.getDate()-k),h.setHours(0,0,0,0),h}}}]);
"use strict";(self.webpackChunkcorunna_ui=self.webpackChunkcorunna_ui||[]).push([[1161],{1161:(S,a,c)=>{c.r(a),c.d(a,{AccountCodeModule:()=>F});var u=c(9595),C=c(4733),s=c(4006),d=c(5115),m=c(9063),h=c(4669),t=c(4650),p=c(6895),A=c(2993),f=c(8118);function v(n,l){if(1&n&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&n){const e=l.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.Oqu(null==e?null:e.sectorName)}}function Z(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"ng-icon",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,N=t.oxw();return t.KtG(N.deleteAccountCode(null==r?null:r._id))}),t.qZA()()()}if(2&n){const e=l.$implicit,o=l.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij(" ",null==e?null:e.acctCode," "),t.xp6(2),t.Oqu(null==e?null:e.sector[0]),t.xp6(2),t.Oqu(null==e?null:e.acctType)}}const T=[{path:"",component:(()=>{class n{constructor(e,o,i,r){this.dialogService=e,this.toastService=o,this.settingsService=i,this.sectorsService=r,this.accountsCodes=[],this.sectors=[],this.codeForm=new s.cw({sector:new s.NI(null,s.kI.required),acctType:new s.NI(null,s.kI.required),acctCode:new s.NI(null)})}ngOnInit(){}ionViewDidEnter(){this.user=JSON.parse(localStorage.getItem("nix-staff")||"{}"),this.getAccountCodes(),this.sectorsService.getSectors().subscribe(e=>{"All"==this.user?.sector?.sectorName?this.sectors=e:(this.sectors=e?.filter(o=>o?.sectorName?.toLowerCase()==this.user?.sector?.sectorName?.toLowerCase())||[],this.sectors=this.sectors?.filter(o=>"all"!==o?.sectorName?.toLowerCase())||[])})}generateCode(){this.codeForm.invalid?this.toastService.toast({title:"Input Error",message:m.xR.invalidForm,position:"center-center",type:"danger"}):this.settingsService.generateAccountCode(this.codeForm.value).subscribe(e=>{this.codeForm.get("acctCode")?.setValue(e?.acctCode)})}saveCode(){this.codeForm.get("acctCode")?.value?this.settingsService.saveAccountCode(this.codeForm.value).subscribe(e=>{this.getAccountCodes(),this.codeForm.reset()}):this.toastService.toast({type:"danger",title:"Input Error",message:m.xR.invalidForm,position:"center-center"})}getAccountCodes(){this.settingsService.getAccountCodes().subscribe(e=>{this.accountsCodes="All"==this.user?.sector?.sectorName?e:e?.filter(o=>o?.sector?.sectorName?.toLowerCase()==this.user?.sector?.sectorName?.toLowerCase())||[]})}deleteAccountCode(e){this.dialogService.openConfirmDialog({title:"Action Confirmation",message:"Are you sure to delete this?"}).subscribe(o=>{o&&this.settingsService.deleteAccountCode(e).subscribe(i=>{i?._id&&this.getAccountCodes()})})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(d.xA),t.Y36(d.kl),t.Y36(h.g),t.Y36(C.A))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["healmah-account-code"]],decls:42,vars:4,consts:[[1,"ion-padding"],[1,"f:1rem",3,"formGroup"],[1,"flex","gap:10","{flex:1}>*"],["formControlName","sector",1,"form-control","shadow-none"],[3,"value",4,"ngFor","ngForOf"],["formControlName","acctType",1,"form-control","shadow-none"],["value","Admin"],["value","Data-Entry"],["readonly","","formControlName","acctCode",1,"form-control","shadow-none"],[1,"flex","jc:space-between","gap:10","mt:10"],[1,"btn","btn-primary","h:35px!","w:100%",3,"click"],[1,"btn","btn-success","h:35px!","w:100%",3,"disabled","click"],[1,"mt:10","table-responsive"],[1,"table","table-bordered","table-striped","table-primary"],["align","top",1,"text-align:center"],[4,"ngFor","ngForOf"],[3,"value"],["name","faSolidTrash",1,"text-danger",3,"click"]],template:function(o,i){if(1&o&&(t.TgZ(0,"ion-content",0)(1,"form",1)(2,"div",2)(3,"div")(4,"label"),t._uU(5,"Sector:"),t.qZA(),t.TgZ(6,"select",3),t._UZ(7,"option"),t.YNc(8,v,2,2,"option",4),t.qZA()(),t.TgZ(9,"div")(10,"label"),t._uU(11,"Acct Type:"),t.qZA(),t.TgZ(12,"select",5)(13,"option",6),t._uU(14,"Admin"),t.qZA(),t.TgZ(15,"option",7),t._uU(16,"Data-Entry"),t.qZA()()(),t.TgZ(17,"div")(18,"label"),t._uU(19,"Code:"),t.qZA(),t._UZ(20,"input",8),t.qZA()(),t.TgZ(21,"div",9)(22,"button",10),t.NdJ("click",function(){return i.generateCode()}),t._uU(23,"Generate"),t.qZA(),t.TgZ(24,"button",11),t.NdJ("click",function(){return i.saveCode()}),t._uU(25,"Save"),t.qZA()()(),t.TgZ(26,"div",12)(27,"table",13)(28,"caption",14),t._uU(29,"Generated Codes"),t.qZA(),t.TgZ(30,"thead")(31,"th"),t._uU(32,"S/NO"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"CODE"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"SECTOR"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"ACCT TYPE"),t.qZA(),t._UZ(39,"th"),t.qZA(),t.TgZ(40,"tbody"),t.YNc(41,Z,11,4,"tr",15),t.qZA()()()()),2&o){let r;t.xp6(1),t.Q6J("formGroup",i.codeForm),t.xp6(7),t.Q6J("ngForOf",i.sectors),t.xp6(16),t.Q6J("disabled",!(null!=(r=i.codeForm.get("acctCode"))&&r.value)),t.xp6(17),t.Q6J("ngForOf",i.accountsCodes)}},dependencies:[p.sg,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,A.Fv,f.W2]})}return n})()}];let b=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(T),u.Bz]})}return n})();var g=c(4850);let F=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[g._o,g.Nu,b]})}return n})()}}]);
"use strict";(self.webpackChunkcorunna_ui=self.webpackChunkcorunna_ui||[]).push([[2047],{7407:(O,d,n)=>{n.d(d,{q:()=>o});var h=n(4850),t=n(9063),p=n(4650);let o=(()=>{class a extends h.q2{constructor(){super(t.jg.Inventory,"dvt",!0)}savePurchase(r){return this.post({payload:r,endPoint:[t.ve.stockStore,t.ve.stockPurchase]})}moderateStockItem(r){return this.post({payload:r,endPoint:[t.ve.stockStore,t.ve.stockLevelModerator]})}getPreviousVendors(){return this.get({endPoint:[t.kg.stockQuery,t.kg.purchaseVendors]})}getPurchases(){return this.get({endPoint:[t.kg.stockQuery,t.kg.stockPurchase]})}getStockItems(r,i){return this.get({endPoint:[t.kg.stockQuery,t.kg.activeStocks],params:[{k:"query-type",v:r},{k:"branch",v:i}]})}getOldStockItems(){return this.get({endPoint:[t.kg.stockQuery,t.kg.oldStocks]})}getStockItemPurchase(r){return this.get({endPoint:[t.kg.stockQuery,t.kg.stockPurchase],params:[{k:"stockItemId",v:r}]})}getOutOfStocks(r,i){return this.get({endPoint:[t.kg.stockQuery,t.kg.outOfStocks],params:[{k:"os-type",v:r},{k:"branch",v:i}]})}static#o=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},2047:(O,d,n)=>{n.r(d),n.d(d,{OutOfStockPageModule:()=>C});var h=n(9595),t=n(4715),p=n(7407),o=n(4650),a=n(2412),u=n(8118),r=n(6895),i=n(4006),v=n(835),b=n(2879);function y(s,T){if(1&s&&(o.TgZ(0,"option",13),o._uU(1),o.qZA()),2&s){const c=T.$implicit;o.Q6J("value",c.branchName),o.xp6(1),o.Oqu(c.branchName)}}const S=[{path:"",component:(()=>{class s{constructor(c,l,e){this.stockService=c,this.platform=l,this.settingsService=e,this.osTab="os",this.shopBranch=null,this.stockItems=[],this.shopBranches=[],this.columns=[{field:"sno",header:this.platform.platforms().includes("mobile")?"S/N":"S/NO"},{field:"_id",header:"ITEM NAME"},{field:"quantity",header:this.platform.platforms().includes("mobile")?"QTTY":"QUANTITY"},{field:"unitCostPrice",header:"COST PRICE"},{field:"avgCons",header:this.platform.platforms().includes("mobile")?"ADC":"AVG DAILY CONS"},{field:"avgCost",header:(this.platform.platforms().includes("mobile"),"COST")}]}ngOnInit(){this.settingsService.getShopBranches().subscribe(c=>{this.shopBranches=c})}getOutOfStock(c){this.stockService.getOutOfStocks(this.osTab,this.shopBranch).subscribe(l=>{c&&c.target.complete(),this.stockItems=l?.length?l.map((e,m)=>({sno:m+1,_id:e?._id||e?.id,itemName:e.itemName,quantity:e.quantity,unitCostPrice:Math.round(e.unitCostPrice),avgCons:e.avgCons,avgCost:Math.round(e.avgCost)})):[]})}static#o=this.\u0275fac=function(l){return new(l||s)(o.Y36(p.q),o.Y36(a.t4),o.Y36(t.g))};static#t=this.\u0275cmp=o.Xpm({type:s,selectors:[["healmah-out-of-stock"]],decls:25,vars:9,consts:[["color","primary"],["slot","start"],["color","light","defaultHref","super"],["slot","start","color","light"],["slot","fixed",3,"ionRefresh"],[3,"columns","data","isCustomCaption"],["dt",""],["caption",""],[1,"d-flex","justify-content-between","gap-2"],[1,"p-input-icon-left","flex-1","d:flex!","bg:white!"],[1,"pi","pi-search"],["type","search","placeholder","Search",1,"form-control","flex:1!","shadow-none","ps-5","b:none!",3,"placeholder","input"],[1,"form-control","form-select","b:none!","shadow:none!","flex-basis:70px!",3,"ngModel","change","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn-group","flex-basis:fit-content"],["btnRadio","single","tabindex","0","role","button",1,"btn","btn-outline-primary","px:2!",3,"ngModel","ngModelChange"],["btnRadio","multiple","tabindex","0","role","button",1,"btn","btn-outline-warning","px:2!",3,"ngModel","ngModelChange"]],template:function(l,e){if(1&l){const m=o.EpF();o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o._UZ(3,"ion-back-button",2),o.qZA(),o.TgZ(4,"ion-title",3),o._uU(5,"Out Of Stocks"),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-refresher",4),o.NdJ("ionRefresh",function(g){return e.getOutOfStock(g)}),o._UZ(8,"ion-refresher-content"),o.qZA(),o.TgZ(9,"prime-table",5,6)(11,"header",7)(12,"div",8)(13,"span",9),o._UZ(14,"i",10),o.TgZ(15,"input",11),o.NdJ("input",function(g){o.CHM(m);const M=o.MAs(10);return o.KtG(M.searchTable(g))}),o.qZA(),o.TgZ(16,"select",12),o.NdJ("change",function(){return e.getOutOfStock()})("ngModelChange",function(g){return e.shopBranch=g}),o.TgZ(17,"option",13),o._uU(18,"All"),o.qZA(),o.YNc(19,y,2,2,"option",14),o.qZA()(),o.TgZ(20,"div",15)(21,"label",16),o.NdJ("ngModelChange",function(g){return e.osTab=g})("ngModelChange",function(){return e.getOutOfStock()}),o._uU(22,"O/S"),o.qZA(),o.TgZ(23,"label",17),o.NdJ("ngModelChange",function(g){return e.osTab=g}),o._uU(24,"NO/S"),o.qZA()()()()()()}2&l&&(o.xp6(9),o.Q6J("columns",e.columns)("data",e.stockItems)("isCustomCaption",!0),o.xp6(6),o.Q6J("placeholder",e.stockItems.length+" items"),o.xp6(1),o.Q6J("ngModel",e.shopBranch),o.xp6(1),o.Q6J("value",null),o.xp6(2),o.Q6J("ngForOf",e.shopBranches),o.xp6(2),o.Q6J("ngModel",e.osTab),o.xp6(2),o.Q6J("ngModel",e.osTab))},dependencies:[r.sg,i.YN,i.Kr,i.EJ,i.JJ,i.On,u.Sm,u.W2,u.Gu,u.nJ,u.Wo,u.wd,u.sr,u.oU,v.lz,b.I],styles:["[_nghost-%COMP%]{--ion-color-primary: #EA6D35;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #1A2031;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #F4E9E9;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #f3f3f3;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return s})()}];let _=(()=>{class s{static#o=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[h.Bz.forChild(S),h.Bz]})}return s})();var P=n(5115),k=n(4850);let C=(()=>{class s{static#o=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[k._o,k.Nu,P.gw,_]})}return s})()},4715:(O,d,n)=>{n.d(d,{g:()=>o});var h=n(4850),t=n(9063),p=n(4650);let o=(()=>{class a extends h.q2{constructor(){super(t.ih.Setting,"dvt",!0)}saveShopBranch(r){return this.post({endPoint:[t.yv.settingsStore,t.yv.shopBranch],payload:r})}assignToShop(r){return this.put({endPoint:[t.yv.settingsStore,t.yv.shopBranch],payload:r})}getShopBranches(){return this.get({endPoint:[t.wm.settingsQuery,t.wm.shopBranch]})}deleteShopBranch(r){return this.delete({payload:r,endPoint:[t.yv.settingsStore,t.yv.shopBranch]})}static#o=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);
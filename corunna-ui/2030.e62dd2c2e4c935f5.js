"use strict";(self.webpackChunkcorunna_ui=self.webpackChunkcorunna_ui||[]).push([[2030],{2030:(D,A,i)=>{i.d(A,{T:()=>Z});var C=i(5861),e=i(5115),f=i(4201),p=i(1263),_=i(9063),l=i(2958),t=i(8033),a=i(9981),n=i(4650),v=i(9595),S=i(8398),O=i(2412),k=i(8118),b=i(4006),I=i(835),x=i(2879);let Z=(()=>{class y{constructor(E,d,u,g,M,o,s,r){var c=this;this.stocksService=E,this.menuService=d,this.toastService=u,this.router=g,this.localStorageService=M,this.dialogService=o,this.platform=s,this.modalCtrl=r,this.columns=[{field:"itemName",header:"ITEM NAME"},{field:"quantity",header:"QUANTITY"},{field:"unitCostPrice",header:"COST"},{field:"unitSellingPrice",header:"SALE"},{field:"createdAt",header:"DATE"}],this.stocks=[],this.stockQueryType="single",this.tableMenu=[{iconLeft:"pen-alt",name:"Edit",clickAction:()=>{if("Super"!==this.staff.acctType)return;const h=this.menuService.contextRow.rowData._id;this.stocksService.getStockItemPurchase(h).subscribe(function(){var m=(0,C.Z)(function*(P){if(P?._id){c.menuService.closeAllMenu();const L=P.itemsPurchased.findIndex(T=>T._id==h);if(-1==L)return void l.F.show({text:"Error, could not find the purchase for this item",duration:"long",position:"bottom"});const N=yield c.modalCtrl.create({component:a.Y,breakpoints:[0,.65,.75],initialBreakpoint:.65,backdropDismiss:!1,cssClass:"sheetModal",componentProps:{data:{purchase:P,itemIndex:L}}});N?.present().then(T=>{}),N.onDidDismiss().then(T=>{c.getStockItems()})}else l.F.show({text:"Error, could not find the purchase for this item",duration:"long",position:"bottom"})});return function(P){return m.apply(this,arguments)}}())}},{iconLeftStyle:"f:red",iconLeft:"trash-alt",name:"Delete",clickAction:()=>{"Super"===this.staff.acctType&&this.dialogService.openConfirmDialog({title:"Action Confirmation",message:"Are you sure to delete this stock?",containerStyle:"bg:white! f:black!"}).subscribe(h=>{h&&this.stocksService.deleteStock(this.menuService.contextRow.rowData?._id).subscribe(function(){var m=(0,C.Z)(function*(P){(P?.length||Array.isArray(P))&&(yield l.F.show({text:"Stock item "+_.kt.itemDeleted,duration:"long",position:"top"}),c.stocks=P,c.menuService.closeAllMenu())});return function(P){return m.apply(this,arguments)}}())})}}],this.stocksWothByPrice=0,this.stocksWothByCost=0}ionViewDidEnter(){this.staff=JSON.parse(this.localStorageService.get("staff-profile")||"{}")}ionViewDidLeave(){this.menuService.closeAllMenu()}getStockItems(){this.stocksService.getAllStocks(this.stockQueryType).subscribe(E=>{E?.length&&(this.stocks=E?.map(d=>({_id:d._id,itemName:d.itemName,quantity:d.quantity,unitCostPrice:d.unitCostPrice,unitSellingPrice:d.unitSellingPrice,createdAt:(0,t.Z)(new Date(d.createdAt??new Date),"d/M/y - h:ma")})),this.stocksWothByCost=(0,_.bY)(E.reduce((d,u)=>d+u.quantity*u.unitCostPrice,0)),this.stocksWothByPrice=(0,_.bY)(E.reduce((d,u)=>d+u.quantity*u.unitSellingPrice,0)))})}closeModal(){this.router.navigate(["Super"==this.staff.acctType?"/super/stock-home":this.staff.acctType?.toLowerCase()])}static#t=this.\u0275fac=function(d){return new(d||y)(n.Y36(p.T),n.Y36(f.hl),n.Y36(e.kl),n.Y36(v.F0),n.Y36(S.n),n.Y36(e.xA),n.Y36(O.t4),n.Y36(k.IN))};static#e=this.\u0275cmp=n.Xpm({type:y,selectors:[["healmah-stock-list"]],hostBindings:function(d,u){1&d&&n.NdJ("popstate",function(M){return u.closeModal(M)},!1,n.Jf7)},decls:19,vars:9,consts:[["color","primary"],["slot","start"],["color","light",3,"defaultHref"],["slot","end","color","light"],["color","tertiary"],[3,"columns","data","rowContextMenu","rowsPerPage","isCustomCaption"],["dt",""],["caption",""],[1,"d-flex","justify-content-between","gap-1"],[1,"flex:1!","d:flex!","ai:center","pl:7","bg:white!","gap:6"],[1,"pi","pi-search"],["type","search","placeholder","Search",1,"form-control","flex:1!","shadow-none","b:none!","f:0.9rem!","m:0!","px:0!",3,"placeholder","input"],[1,"btn-group"],["btnRadio","single","tabindex","0","role","button",1,"btn","btn-outline-primary","px:2!",3,"ngModel","ngModelChange"],["btnRadio","multiple","tabindex","0","role","button",1,"btn","btn-outline-warning","px:2!",3,"ngModel","ngModelChange"]],template:function(d,u){if(1&d){const g=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA(),n.TgZ(4,"ion-title",3),n._uU(5,"Stock List"),n.qZA()()(),n.TgZ(6,"ion-content",4)(7,"prime-table",5,6)(9,"header",7)(10,"div",8)(11,"span",9),n._UZ(12,"i",10),n.TgZ(13,"input",11),n.NdJ("input",function(o){n.CHM(g);const s=n.MAs(8);return n.KtG(s.searchTable(o))}),n.qZA()(),n.TgZ(14,"div",12)(15,"label",13),n.NdJ("ngModelChange",function(o){return u.stockQueryType=o})("ngModelChange",function(){return u.getStockItems()}),n._uU(16,"Single"),n.qZA(),n.TgZ(17,"label",14),n.NdJ("ngModelChange",function(o){return u.stockQueryType=o}),n._uU(18,"Variants"),n.qZA()()()()()()}2&d&&(n.xp6(3),n.Q6J("defaultHref",null==u.staff||null==u.staff.acctType?null:u.staff.acctType.toLowerCase()),n.xp6(4),n.Q6J("columns",u.columns)("data",u.stocks)("rowContextMenu",u.tableMenu)("rowsPerPage",25)("isCustomCaption",!0),n.xp6(6),n.Q6J("placeholder","N"+u.stocksWothByCost+" ~ N"+u.stocksWothByPrice),n.xp6(2),n.Q6J("ngModel",u.stockQueryType),n.xp6(2),n.Q6J("ngModel",u.stockQueryType))},dependencies:[b.JJ,b.On,k.Sm,k.W2,k.Gu,k.wd,k.sr,k.oU,I.lz,x.I],styles:["[_nghost-%COMP%]{--ion-color-primary: #1F5BBC;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}"]})}return y})()},9981:(D,A,i)=>{i.d(A,{Y:()=>u});var C=i(1263),e=i(4006),f=i(2958),p=i(9063),_=i(7978),l=i(9652),t=i(4650),a=i(8118),n=i(2412),v=i(6895),S=i(6726),O=i(5939),k=i(8093),b=i(2216),I=i(7165),x=i(9252),Z=i(1191);function y(g,M){1&g&&(t.TgZ(0,"h3",20),t._uU(1," Edit Purchase "),t.qZA())}function U(g,M){1&g&&(t.TgZ(0,"h3",20),t._uU(1," Create Purchase "),t.qZA())}function E(g,M){if(1&g){const o=t.EpF();t.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"label",26),t._uU(4,"Item name:"),t.qZA(),t.TgZ(5,"input",27,28),t.NdJ("change",function(r){t.CHM(o);const c=t.MAs(6),h=t.MAs(11),m=t.oxw(2);return t.KtG(m.avoidDuplicateName(c,h,r))})("typeaheadOnSelect",function(r){t.CHM(o);const c=t.MAs(6),h=t.MAs(11),m=t.oxw(2);return t.KtG(m.avoidDuplicateName(c,h,r))}),t.qZA()(),t.TgZ(7,"div",25)(8,"ion-label"),t._uU(9,"Quantity:"),t.qZA(),t.TgZ(10,"input",29,30),t.NdJ("input",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.unitCostPriceChanged())}),t.qZA()()(),t.TgZ(12,"div",24)(13,"div",25)(14,"ion-label"),t._uU(15,"Cost Price:"),t.qZA(),t.TgZ(16,"input",31),t.NdJ("change",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.unitCostPriceChanged())})("input",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.unitCostPriceChanged())}),t.qZA()(),t.TgZ(17,"div",25)(18,"ion-label"),t._uU(19,"Selling Price:"),t.qZA(),t.TgZ(20,"input",32),t.NdJ("input",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.setPriceOrMarkup("markup"))})("change",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.setPriceOrMarkup("markup"))}),t.qZA()()()()}if(2&g){const o=t.oxw().$implicit,s=t.oxw();let r,c;t.Q6J("formGroupName",s.activePage),t.xp6(5),t.Q6J("disable",null==(r=o.get("id"))?null:r.value)("typeahead",s.oldStockList)("typeaheadOptionField","_id"),t.xp6(5),t.Q6J("disable",null==(c=o.get("id"))?null:c.value),t.xp6(6),t.Q6J("decimal",!0),t.xp6(4),t.Q6J("decimal",!0)}}function d(g,M){if(1&g&&(t.TgZ(0,"div",21),t.YNc(1,E,21,7,"div",22),t.qZA()),2&g){const o=M.index,s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.activePage===o)}}let u=(()=>{class g{constructor(o,s,r){this.modalController=o,this.navParams=s,this.stocksService=r,this.itemCostWorth=0,this.itemsCostWorth=0,this.activePage=0,this.oldStockList=[],this.purchaseVendors=[],this.handler=c=>this.purchaseForm.invalid?(f.F.show({text:p.xR.invalidForm,duration:"long",position:"bottom"}),Promise.resolve()):this.stocksService.savePurchase(this.purchaseForm.getRawValue()),this.purchaseForm=new e.cw({vendor:new e.NI(null,e.kI.required),itemsPurchased:new e.Oe([this.purchasedItemsGroup()]),idempotencyKey:new e.NI((0,l.x0)())})}ngOnInit(){this.getOldStockItemList();const o=this.navParams.get("data");o?.purchase&&(this.fillForm(o.purchase),o?.itemIndex>=0&&(this.activePage=o?.itemIndex))}ngOnDestroy(){history.state.purchaseModal&&history.back()}ionViewDidEnter(){this.stocksService.getPreviousVendors().subscribe(o=>{this.purchaseVendors=o})}closeModal(){this.modalController.dismiss()}get itemsPurchasedArr(){return this.purchaseForm.get("itemsPurchased")}purchasedItemsGroup(o){return new e.cw({id:new e.NI(o?._id),itemName:new e.NI(o?.itemName??null,e.kI.required),expiryDate:new e.NI(new Date(o?.expiryDate??(0,_.Z)(new Date,1))),quantity:new e.NI(o?.quantity??null,[e.kI.required,e.kI.min(0)]),unitCostPrice:new e.NI(o?.unitCostPrice??null,[e.kI.required,e.kI.min(1)]),unitSellingPrice:new e.NI(o?.unitSellingPrice??null,[e.kI.required,e.kI.min(1)]),unitSellingMarkup:new e.NI(o?.unitSellingMarkup??null)})}addItemPurchased(){this.purchaseForm.valid?(this.itemsPurchasedArr.push(this.purchasedItemsGroup()),this.activePage=this.itemsPurchasedArr.length-1,this.calculateStockWorth()):f.F.show({text:"Please ensure previous items are set up correctly before adding another.",position:"bottom",duration:"long"})}removeItemPurchased(){if(this.itemsPurchasedArr.controls[this.activePage]?.get("id")?.value)f.F.show({text:"Already saved items can not be removed.",position:"bottom",duration:"long"});else{if(this.itemsPurchasedArr.controls.length<=1)return;this.itemsPurchasedArr.removeAt(this.activePage),this.activePage=this.itemsPurchasedArr.length-1,this.calculateStockWorth()}}fillForm(o){this.purchaseForm=new e.cw({id:new e.NI(o._id),vendor:new e.NI(o.vendor,e.kI.required),itemsPurchased:new e.Oe([...o.itemsPurchased.map((s,r)=>{this.activePage=r;const c=s.unitCostPrice;return s.unitSellingMarkup=(0,p.QV)((s.unitSellingPrice-c)/c*100??0,2),this.purchasedItemsGroup(s)})]),idempotencyKey:new e.NI((0,l.x0)())}),this.calculateStockWorth()}getOldStockItemList(){this.stocksService.getOldStockItems().subscribe(o=>{this.oldStockList=o})}paginate(o){this.activePage=o.page,this.calculateStockWorth()}calculateStockWorth(){this.itemsCostWorth=0;for(let o=0;o<this.itemsPurchasedArr.length;o++)this.itemsPurchasedArr.controls[o]?.get("quantity")?.invalid||this.itemsPurchasedArr.controls[o]?.get("unitCostPrice")?.invalid||(this.itemsCostWorth+=parseFloat(this.itemsPurchasedArr.controls[o]?.get("quantity")?.value)*parseFloat(this.itemsPurchasedArr.controls[o]?.get("unitCostPrice")?.value)||0);this.itemCostWorth=parseInt(this.itemsPurchasedArr.controls[this.activePage]?.get("quantity")?.value||0)*parseFloat(this.itemsPurchasedArr.controls[this.activePage]?.get("unitCostPrice")?.value||0)||0}avoidDuplicateName(o,s,r){const c=this.itemsPurchasedArr.controls[this.activePage].get("itemName")?.value;if(this.itemsPurchasedArr.getRawValue().filter(m=>m.itemName===c)?.length>1)return f.F.show({text:"Item with same name already exist, please edit the former.",position:"bottom",duration:"long"}),this.itemsPurchasedArr.controls[this.activePage].get("itemName")?.reset(),void o?.focus();if(r?.item){const m=r.item,P=m.unitCostPrice;m.unitSellingMarkup=(0,p.QV)((m.unitSellingPrice-P)/P*100||0,2),this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.setValue(m.unitCostPrice),this.itemsPurchasedArr.controls[this.activePage].get("unitSellingPrice")?.setValue(m.unitSellingPrice),this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.setValue(m.unitSellingMarkup),s?.focus()}}unitCostPriceChanged(){if(this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.value||this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.setValue(25),this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value&&this.itemsPurchasedArr.controls[this.activePage].get("quantity")?.value){const o=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.value)*parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value||1)/100,s=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value)+o;this.itemsPurchasedArr.controls[this.activePage].get("unitSellingPrice")?.setValue((0,p.QV)(s,0))}this.calculateStockWorth()}setPriceOrMarkup(o){if("markup"==o){const s=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value),r=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitSellingPrice")?.value);if(!s||!r)return;const h=(r-s)/s*100;this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.setValue((0,p.QV)(h||0,2))}else{const s=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitSellingMarkup")?.value)*parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value||1)/100,r=parseFloat(this.itemsPurchasedArr.controls[this.activePage].get("unitCostPrice")?.value)+s;this.itemsPurchasedArr.controls[this.activePage].get("unitSellingPrice")?.setValue((0,p.QV)(r||0,0))}}apiResponse(o){o?._id&&(f.F.show({text:"Purchase saved successfully",duration:"long",position:"top"}),this.purchaseForm.get("id")?.value?this.fillForm(o):this.resetForm())}resetForm(){this.purchaseForm.reset(),this.itemsPurchasedArr.clear(),this.itemsPurchasedArr.push(this.purchasedItemsGroup()),this.purchaseForm.get("idempotencyKey")?.setValue((0,l.x0)())}static#t=this.\u0275fac=function(s){return new(s||g)(t.Y36(a.IN),t.Y36(n.X1),t.Y36(C.T))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["healmah-stock-purchase"]],hostBindings:function(s,r){1&s&&t.NdJ("popstate",function(h){return r.closeModal(h)},!1,t.Jf7)},decls:33,vars:17,consts:[[1,"ion-no-border"],["color","tertiary"],[1,"flex","jc:space-between","ai:center!","px:20","f:black!","h:100%"],["class","f:black!",4,"ngIf"],["icon","times",1,"f:1.5rem","text-danger",3,"click"],[1,"ion-padding-horizontal"],[1,"pt:10",3,"formGroup"],[1,"flex","{flex:1}>div","gap:10"],["wordCase","","case","capitalize","formControlName","vendor","type","text","wordCase","","case","capitalize","container","body",1,"form-control","shadow-none",3,"typeahead","typeaheadOptionField"],[1,"flex","ai:center","{flex:1}_h4","my:20","bg:rgba(0,0,0,0.1)","r:5","p:3"],[1,"flex","ai:center","jc:center"],["icon","minus-circle",1,"btn","btn-outline-warning","btn-sm","m-sm-0",3,"click"],[1,"flex","ai:center","jc:center","mx:10"],["icon","plus-circle",1,"btn","btn-outline-success","btn-sm","m-sm-0",3,"click"],["class","form-group","formArrayName","itemsPurchased",4,"ngFor","ngForOf"],[1,"px-1","d-flex","flex-column","py-2"],[1,"p-0",3,"pageLinkSize","rows","first","totalRecords","onPageChange"],[1,"d-flex"],["btnDisabler","","expand","full","fill","solid","shape","round",1,"w-100",3,"handler","handle"],["expand","full","color","warning","fill","solid","shape","round",1,"w-100",3,"click"],[1,"f:black!"],["formArrayName","itemsPurchased",1,"form-group"],["class","flex flex-direction:column gap:10",3,"formGroupName",4,"ngIf"],[1,"flex","flex-direction:column","gap:10",3,"formGroupName"],[1,"d-flex","gap-2"],[1,"flex-1"],["for",""],["formControlName","itemName","wordCase","","case","capitalize","controlConfig","","container","body","type","text",1,"form-control","shadow-none",3,"disable","typeahead","typeaheadOptionField","change","typeaheadOnSelect"],["self",""],["formControlName","quantity","controlConfig","","digitOnly","","type","number",1,"form-control","shadow-none",3,"disable","input"],["qtty",""],["type","number","digitOnly","","formControlName","unitCostPrice",1,"form-control","shadow-none",3,"decimal","change","input"],["digitOnly","","formControlName","unitSellingPrice","type","number",1,"form-control","shadow-none",3,"decimal","input","change"]],template:function(s,r){if(1&s&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"header",2),t.YNc(3,y,2,0,"h3",3),t.YNc(4,U,2,0,"h3",3),t.TgZ(5,"fa-icon",4),t.NdJ("click",function(){return r.modalController.dismiss()}),t.qZA()()()(),t.TgZ(6,"ion-content",5)(7,"form",6)(8,"div",7)(9,"div")(10,"ion-label"),t._uU(11,"Vendor Name:"),t.qZA(),t._UZ(12,"input",8),t.qZA()(),t.TgZ(13,"header",9)(14,"h4",10),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"fa-icon",11),t.NdJ("click",function(){return r.removeItemPurchased()}),t.qZA(),t.TgZ(18,"h3",12),t._uU(19,"ITEMS"),t.qZA(),t.TgZ(20,"fa-icon",13),t.NdJ("click",function(){return r.addItemPurchased()}),t.qZA(),t.TgZ(21,"h4",10),t._uU(22),t.ALo(23,"number"),t.qZA()(),t.TgZ(24,"main"),t.YNc(25,d,2,1,"div",14),t.qZA(),t.TgZ(26,"footer",15)(27,"p-paginator",16),t.NdJ("onPageChange",function(h){return r.paginate(h)}),t.qZA(),t.TgZ(28,"div",17)(29,"ion-button",18),t.NdJ("handle",function(h){return r.apiResponse(h)}),t._uU(30," Save "),t.qZA(),t.TgZ(31,"ion-button",19),t.NdJ("click",function(){return r.resetForm()}),t._uU(32," Reset "),t.qZA()()()()()),2&s){let c,h;t.xp6(3),t.Q6J("ngIf",null==(c=r.purchaseForm.get("_id"))?null:c.value),t.xp6(1),t.Q6J("ngIf",!(null!=(h=r.purchaseForm.get("_id"))&&h.value)),t.xp6(3),t.Q6J("formGroup",r.purchaseForm),t.xp6(5),t.Q6J("typeahead",r.purchaseVendors)("typeaheadOptionField","_id"),t.xp6(3),t.hij(" ",t.lcZ(16,13,r.itemCostWorth||0)," "),t.xp6(7),t.hij(" ",t.lcZ(23,15,r.itemsCostWorth||0)," "),t.xp6(3),t.Q6J("ngForOf",r.itemsPurchasedArr.controls),t.xp6(2),t.Q6J("pageLinkSize",3)("rows",1)("first",r.activePage)("totalRecords",r.itemsPurchasedArr.length),t.xp6(2),t.Q6J("handler",r.handler)}},dependencies:[v.sg,v.O5,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.sg,e.u,e.x0,e.CE,S.h,O.V,k.j,a.YG,a.W2,a.Gu,a.Q$,a.sr,b.BN,I.D,x.L,Z.Bp,v.JJ]})}return g})()},1263:(D,A,i)=>{i.d(A,{T:()=>_});var C=i(4850),e=i(9063),f=i(1135),p=i(4650);let _=(()=>{class l extends C.q2{constructor(){super(e.ih.STOCK,"rmd",!0),this.updateReport=new f.X(!1)}getPurchases(){return this.get({endPoint:[e.kg.stockQuery,e.kg.stockPurchase]})}getAllStocks(a){return this.get({endPoint:[e.kg.stockQuery,e.kg.activeStocks],params:[{k:"query-type",v:a}]})}saveStock(a){return this.post({endPoint:[e.ve.stockStore,e.ve.stockPurchase],payload:a})}savePurchase(a){return this.post({endPoint:[e.ve.stockStore,e.ve.stockPurchase],payload:a})}deleteStock(a){return this.delete({endPoint:[e.ve.stockStore,e.ve.stockPurchase],payload:a})}getSaleStocks(){return this.get({endPoint:[e.kg.stockQuery,e.ol.saleItems]})}processSale(a){return this.post({endPoint:[e.ve.stockStore,e.eb.dispenseOrder],payload:a})}getPreviousVendors(){return this.get({endPoint:[e.kg.stockQuery,e.kg.purchaseVendors]})}getOldStockItems(){return this.get({endPoint:[e.kg.stockQuery,e.kg.oldStocks]})}getStockItemPurchase(a){return this.get({endPoint:[e.kg.stockQuery,e.kg.stockPurchase],params:[{k:"stockItemId",v:a}]})}getOutOfStocks(a){return this.get({endPoint:[e.kg.stockQuery,e.kg.outOfStocks],params:[{k:"os-type",v:a}]})}static#t=this.\u0275fac=function(n){return new(n||l)};static#e=this.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},5866:(D,A,i)=>{i.d(A,{Z:()=>p});var C=i(1998),e=i(953),f=i(833);function p(_,l){(0,f.Z)(2,arguments);var t=(0,e.Z)(_),a=(0,C.Z)(l);if(isNaN(a))return new Date(NaN);if(!a)return t;var n=t.getDate(),v=new Date(t.getTime());return v.setMonth(t.getMonth()+a+1,0),n>=v.getDate()?v:(t.setFullYear(v.getFullYear(),v.getMonth(),n),t)}},7978:(D,A,i)=>{i.d(A,{Z:()=>p});var C=i(1998),e=i(5866),f=i(833);function p(_,l){(0,f.Z)(2,arguments);var t=(0,C.Z)(l);return(0,e.Z)(_,12*t)}},9652:(D,A,i)=>{i.d(A,{x0:()=>p});let p=(_=21)=>crypto.getRandomValues(new Uint8Array(_)).reduce((l,t)=>l+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);
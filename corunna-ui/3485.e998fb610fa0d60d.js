"use strict";(self.webpackChunkcorunna_ui=self.webpackChunkcorunna_ui||[]).push([[3485],{2039:(O,v,o)=>{o.d(v,{c:()=>m});var d=o(4850),a=o(9063),g=o(4650);let m=(()=>{class i extends d.q2{constructor(){super(a.ih.Setting,"cpt",!0),this.getSystemConfig().subscribe(u=>{this.systemConfig=u})}getDeleted(u,t,l){return this.get({endPoint:[a.wm.settingsQuery],params:[{k:"type",v:u},{k:"sDate",v:JSON.stringify(t)},{k:"eDate",v:JSON.stringify(l)}]})}saveSystemConfig(u){return this.post({payload:u,endPoint:[a.yv.settingsStore,a.yv.saveSettings]})}getSystemConfig(){return this.get({endPoint:[a.wm.settingsQuery,a.wm.getSettings]})}static#t=this.\u0275fac=function(t){return new(t||i)};static#e=this.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},8359:(O,v,o)=>{o.d(v,{N:()=>i});var d=o(4850),a=o(9063),g=o(4650),m=o(8118);let i=(()=>{class p extends d.q2{constructor(t){super(a.ih.STOCK,"cpt",!0),this.modalCtrl=t}getOverview(t,l){return this.get({endPoint:[a.kg.stockQuery],params:[{k:"sDate",v:JSON.stringify(t)},{k:"eDate",v:JSON.stringify(l)}]})}getDashboardServices(t,l){return this.get({endPoint:[a.kg.stockQuery,a.cY.dispenseHistory],params:[{k:"sDate",v:JSON.stringify(t)},{k:"eDate",v:JSON.stringify(l)}]})}deleteDashboardSale(t,l,y){return this.delete({payload:l,params:[{k:"batchId",v:t},{k:"type",v:y}],endPoint:[a.ve.stockStore,a.eb.returnSaleItems]})}static#t=this.\u0275fac=function(l){return new(l||p)(g.LFG(m.IN))};static#e=this.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},3485:(O,v,o)=>{o.r(v),o.d(v,{OverviewPageModule:()=>S});var d=o(9595),a=o(8359),g=o(9063),m=o(8115),i=o(895),p=o(5119),u=o(2039),t=o(4650),l=o(6895),y=o(4006),h=o(8118),D=o(2216),A=o(2054),b=o(9492);function Z(r,C){if(1&r&&(t.TgZ(0,"div",20)(1,"label"),t._uU(2,"Cash:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&r){const n=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,n.cashAmount||0))}}function P(r,C){if(1&r&&(t.TgZ(0,"div",20)(1,"label"),t._uU(2,"Bank:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&r){const n=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,n.bankAmount||0))}}const _=function(){return{dateInputFormat:"DD/MM/YYYY",containerClass:"theme-blue",adaptivePosition:!0}},E=[{path:"",component:(()=>{class r{constructor(n,s){this.dashboardSaleService=n,this.systemConfigService=s,this.sDate=new Date,this.eDate=new Date,this.overview=[],this.colors=["#5470C6","#e91e63","#EE6666"],this.option={color:this.colors,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{right:"12%"},toolbox:{feature:{saveAsImage:{show:!0}}},legend:{data:["Frequency","TotalAmount"],textStyle:{color:"#ccc"}},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:35},data:["dt1","dt2"]}],yAxis:[{type:"value",name:"Frequency",position:"left",alignTicks:!0,axisLine:{show:!0,lineStyle:{color:this.colors[0]}}},{type:"value",name:"PlayAmount",position:"right",alignTicks:!0,axisLine:{show:!0,lineStyle:{color:this.colors[1]}},axisLabel:{formatter:(e,f)=>e<1e3?e.toString():e/1e3+"K"}}],series:[{name:"PlayCount",type:"bar",data:[2,4]},{name:"TotalAmount",type:"bar",yAxisIndex:1,data:[3,5]}]},this.chatData={},this.cashAmount=0,this.bankAmount=0}ngOnInit(){this.getOverview()}ionViewDidEnter(){this.systemConfigService.getSystemConfig().subscribe(n=>{this.settings=n,"Daily"==this.settings.commissionRange&&(this.sDate=(0,m.Z)(new Date)),"Weekly"==this.settings.commissionRange&&(this.sDate=(0,i.Z)(new Date)),"Monthly"==this.settings.commissionRange&&(this.sDate=(0,p.Z)(new Date)),this.getOverview()})}getOverview(){this.dashboardSaleService.getOverview(this.sDate,this.eDate).subscribe(n=>{const s=[...n?.gamesByPayMethod,...n?.saleByPayMethod,...n?.serviceByPayMethod];this.cashAmount=s?.filter(e=>"Cash"==e?._id)?.reduce((e,f)=>e+f?.amount,0),this.bankAmount=s?.filter(e=>"Bank"==e?._id)?.reduce((e,f)=>e+f?.amount,0),this.overview=n,this.chatData=n?.popularServices,this.formatForChat(this.chatData)})}onChartInit(n){this.echartsInstance=n,this.getOverview()}onChartEvent(n){}formatForChat(n){if(!n||!n.length)return;const s=[],e=[],f=[];(n=(0,g.Sy)(n)).forEach(c=>{s.push(c._id),e.push(c.amount),f.push(c.count)}),this.option={color:this.colors,title:{text:"Popular Hair Services",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{right:"12%",top:"20%"},toolbox:{feature:{saveAsImage:{show:!0}}},legend:{data:["Frequency","TotalAmount"],top:"25",textStyle:{color:"#fff"}},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:35},data:[...s]}],yAxis:[{type:"value",name:"Frequency",position:"left",alignTicks:!0,axisLine:{show:!0,lineStyle:{color:this.colors[0]}}},{type:"value",name:"TotalAmount",position:"right",alignTicks:!0,axisLine:{show:!0,lineStyle:{color:this.colors[1]}},axisLabel:{formatter:(c,x)=>c<1e3?c.toString():c/1e3+"K"}}],series:[{name:"Frequency",type:"bar",data:[...f]},{name:"TotalAmount",type:"bar",yAxisIndex:1,data:[...e]}]}}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(a.N),t.Y36(u.c))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["healmah-overview"]],decls:57,vars:30,consts:[["color","primary"],[1,"bg:#333B46","rb:30px","rt:0!","pt:10","bt:1px|solid|#333B46","shadow:|0|1|0|rgba(255,255,255,0.3)","w:100%","d:flex","flex-direction:column","ai:center","jc:center","p:5"],[1,"flex","gap:5","px:5","{b:#0F85E9!}_input"],["type","text","bsDatepicker","",1,"form-control","r:0!","b:#0F85E9!","bg:transparent!","f:white!",3,"ngModel","bsConfig","ngModelChange"],[1,"btn","btn-outline-info","b:#0F85E9!","r:0!",3,"click"],["icon","search",1,"f:#1F5BBC"],[1,"flex","jc:space-between","w:100%","p:5"],["class","flex gap:5 f:white! f:1.1rem! {f:bold}>span",4,"ngIf"],[1,"f:2rem","f:white","f:bold"],[1,"opacity:0.85"],[1,"f:white","opacity:0.8"],["echarts","",1,"h:400","w:100%!","mt:15",3,"options","chartInit","chartClick"],["vertical","bottom","horizontal","end","slot","fixed"],["color","secondary","routerLink","/super/register-home"],["icon","book-open",1,"f:white","f:1.5rem"],[1,"bg:#333B46!"],[1,"ion-padding","min-h:25vh!","shadow:0|1|2|rgba(0,0,0,0.5)!","d:flex!","ai:center","rt:50px","f:white!","text-shadow:0|0|2|rgba(0,0,0,0.9)!","ml:-5","w:calc(100%+5px)"],[1,"rel","h:100%","w:100%","flex","flex-direction:column","gap:10"],[1,"flex:1","d:flex","jc:center","ai:center","shadow:0|1|2|rgba(0,0,0,0.3)","gap:5","padding:5","rb:15!","{f:bold;f:1.1rem}_span","{opacity:0.8}_ion-label"],[1,"d:flex","jc:space-between","{flex:1;d:flex;jc:center;ai:center;flex-direction:column;shadow:0|1|2|rgba(0,0,0,0.3);gap:5;padding:5}>*","r:15!","{f:bold;f:1.1rem}_span","{opacity:0.8}_ion-label"],[1,"flex","gap:5","f:white!","f:1.1rem!","{f:bold}>span"]],template:function(s,e){1&s&&(t.TgZ(0,"ion-content",0)(1,"main",1)(2,"div",2)(3,"input",3),t.NdJ("ngModelChange",function(c){return e.sDate=c}),t.qZA(),t.TgZ(4,"input",3),t.NdJ("ngModelChange",function(c){return e.eDate=c}),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return e.getOverview()}),t._UZ(6,"fa-icon",5),t.qZA()(),t.TgZ(7,"header",6),t.YNc(8,Z,6,3,"div",7),t.YNc(9,P,6,3,"div",7),t.qZA(),t.TgZ(10,"h2",8),t._uU(11),t.ALo(12,"number"),t.TgZ(13,"sub",9),t._uU(14),t.ALo(15,"number"),t.qZA()(),t.TgZ(16,"label",10),t._uU(17,"Gross Balance"),t.qZA()(),t.TgZ(18,"div",11),t.NdJ("chartInit",function(c){return e.onChartInit(c)})("chartClick",function(c){return e.onChartEvent({event:c})}),t.qZA(),t.TgZ(19,"ion-fab",12)(20,"ion-fab-button",13),t._UZ(21,"fa-icon",14),t.qZA()()(),t.TgZ(22,"ion-footer",15)(23,"ion-toolbar",16)(24,"section",17)(25,"div",18)(26,"ion-label"),t._uU(27,"Services: "),t.qZA(),t.TgZ(28,"span"),t._uU(29),t.ALo(30,"number"),t.qZA()(),t.TgZ(31,"header",19)(32,"div")(33,"span"),t._uU(34),t.ALo(35,"number"),t.qZA(),t.TgZ(36,"ion-label"),t._uU(37,"Games"),t.qZA()(),t.TgZ(38,"div")(39,"span"),t._uU(40),t.ALo(41,"number"),t.qZA(),t.TgZ(42,"ion-label"),t._uU(43,"Sales"),t.qZA()()(),t.TgZ(44,"footer",19)(45,"div")(46,"span"),t._uU(47),t.ALo(48,"number"),t.qZA(),t.TgZ(49,"ion-label"),t._uU(50,"Payouts"),t.qZA()(),t.TgZ(51,"div")(52,"ion-label"),t._uU(53,"Expenses:"),t.qZA(),t.TgZ(54,"span"),t._uU(55),t.ALo(56,"number"),t.qZA()()()()()()),2&s&&(t.xp6(3),t.Q6J("ngModel",e.sDate)("bsConfig",t.DdM(28,_)),t.xp6(1),t.Q6J("ngModel",e.eDate)("bsConfig",t.DdM(29,_)),t.xp6(4),t.Q6J("ngIf",e.cashAmount),t.xp6(1),t.Q6J("ngIf",e.bankAmount),t.xp6(2),t.hij(" ",t.lcZ(12,14,((null==e.overview||null==e.overview.totalRenderedAmount?null:e.overview.totalRenderedAmount.amount)||0)+((null==e.overview||null==e.overview.totalGameAmount?null:e.overview.totalGameAmount.amount)||0)+((null==e.overview||null==e.overview.totalSaleAmount?null:e.overview.totalSaleAmount.amount)||0))," "),t.xp6(3),t.hij(" ",t.lcZ(15,16,((null==e.overview||null==e.overview.totalRenderedAmount?null:e.overview.totalRenderedAmount.amount)||0)+((null==e.overview||null==e.overview.totalGameAmount?null:e.overview.totalGameAmount.amount)||0)+((null==e.overview||null==e.overview.totalSaleAmount?null:e.overview.totalSaleAmount.amount)||0)-(((null==e.overview||null==e.overview.totalExpenseAmount?null:e.overview.totalExpenseAmount.amount)||0)+((null==e.overview||null==e.overview.totalPayoutAmount?null:e.overview.totalPayoutAmount.amount)||0)))," "),t.xp6(4),t.Q6J("options",e.option),t.xp6(11),t.Oqu(t.lcZ(30,18,(null==e.overview||null==e.overview.totalRenderedAmount?null:e.overview.totalRenderedAmount.amount)||0)),t.xp6(5),t.Oqu(t.lcZ(35,20,(null==e.overview||null==e.overview.totalGameAmount?null:e.overview.totalGameAmount.amount)||0)),t.xp6(6),t.Oqu(t.lcZ(41,22,(null==e.overview||null==e.overview.totalSaleAmount?null:e.overview.totalSaleAmount.amount)||0)),t.xp6(7),t.Oqu(t.lcZ(48,24,(null==e.overview||null==e.overview.totalPayoutAmount?null:e.overview.totalPayoutAmount.amount)||0)),t.xp6(8),t.Oqu(t.lcZ(56,26,(null==e.overview||null==e.overview.totalExpenseAmount?null:e.overview.totalExpenseAmount.amount)||0)))},dependencies:[l.O5,y.Fj,y.JJ,y.On,d.rH,h.W2,h.IJ,h.W4,h.fr,h.Q$,h.sr,h.YI,D.BN,A._w,b.Np,b.Y5,l.JJ],styles:["[_nghost-%COMP%]{--ion-color-primary: #333B46;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #333B46;--ion-color-primary-tint: #333B46;--ion-color-secondary: #1F2630;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #1F2630;--ion-color-secondary-tint: #1F2630;--ion-color-tertiary: #f3f3f3;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(30deg, #1F2630 12%, transparent 12.5%, transparent 87%, #1F2630 87.5%, #1F2630), linear-gradient(150deg, #1F2630 12%, transparent 12.5%, transparent 87%, #1F2630 87.5%, #1F2630), linear-gradient(30deg, #1F2630 12%, transparent 12.5%, transparent 87%, #1F2630 87.5%, #1F2630), linear-gradient(150deg, #1F2630 12%, transparent 12.5%, transparent 87%, #1F2630 87.5%, #1F2630), linear-gradient(60deg, #1F263077 25%, transparent 25.5%, transparent 75%, #1F263077 75%, #1F263077), linear-gradient(60deg, #1F263077 25%, transparent 25.5%, transparent 75%, #1F263077 75%, #1F263077)}"]})}return r})()}];let T=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(E),d.Bz]})}return r})();var M=o(4850);let S=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[M._o,M.Nu,A.Ns.forRoot({echarts:()=>o.e(1701).then(o.bind(o,1701))}),T]})}return r})()},8115:(O,v,o)=>{o.d(v,{Z:()=>g});var d=o(953),a=o(833);function g(m){(0,a.Z)(1,arguments);var i=(0,d.Z)(m);return i.setHours(0,0,0,0),i}},5119:(O,v,o)=>{o.d(v,{Z:()=>g});var d=o(953),a=o(833);function g(m){(0,a.Z)(1,arguments);var i=(0,d.Z)(m);return i.setDate(1),i.setHours(0,0,0,0),i}},895:(O,v,o)=>{o.d(v,{Z:()=>i});var d=o(953),a=o(1998),g=o(833),m=o(8370);function i(p,u){var t,l,y,h,D,A,b,Z;(0,g.Z)(1,arguments);var P=(0,m.j)(),_=(0,a.Z)(null!==(t=null!==(l=null!==(y=null!==(h=u?.weekStartsOn)&&void 0!==h?h:null==u||null===(D=u.locale)||void 0===D||null===(A=D.options)||void 0===A?void 0:A.weekStartsOn)&&void 0!==y?y:P.weekStartsOn)&&void 0!==l?l:null===(b=P.locale)||void 0===b||null===(Z=b.options)||void 0===Z?void 0:Z.weekStartsOn)&&void 0!==t?t:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=(0,d.Z)(p),E=w.getDay(),T=(E<_?7:0)+E-_;return w.setDate(w.getDate()-T),w.setHours(0,0,0,0),w}}}]);